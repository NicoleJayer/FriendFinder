<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Friend Finder Survey</title>

      <!-- jquery link -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <!-- style sheets -->
    <link rel="stylesheet" href="css/reset.css">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Compiled and minified Materialize CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">

	<!-- Compiled and minified Materialize JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>

    <link rel="stylesheet" href="css/style.css">

  </head>


  <body>

    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-md-8" id="title">♥Friend Finder♥
        <div class="navbar"><a href="/api/friends">API Friends List</a>
					<a href="https://github.com/NicoleJayer/FriendFinder">GitHub Repo</a></div>
      </div>
      <div class="col-md-2"></div>
    </div>

    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-md-8">
      <div><h1>Survey Questions</h1></div>

      <div class="input-field">
							<h5>Name (Required)</h5>
							<input type="text" class="validate" placeholder="Your Name Here" id="userName">
						</div>

						<div class="input-field">
							<h5>Link to Photo Image (Required)</h5>
							<input type="text" class="validate" placeholder="Photo Link Here" id="userPhoto">
						</div>

						<!-- Survey Questions -->
						<div class="input-field">
							<h3>Question 1</h3>
							<h5>Your dream is to live in Stars Hollow.</h5>
							<select id="question1">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 2</h3>
							<h5>You are a team Jess or Dean.</h5>
							<select id="question2">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 3</h3>
							<h5>You are a team Logan (the right team).</h5>
							<select id="question3">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 4</h3>
							<h5>Your heart swells at the intro song. Every time.</h5>
							<select id="question4">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 5</h3>
							<h5>You wish Emily Gilmore was your mother.</h5>
							<select id="question5">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 6</h3>
							<h5>You think Rory Gilmore is spoiled.</h5>
							<select id="question6">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 7</h3>
							<h5>You were dissapointed by the revival.</h5>
							<select id="question7">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 8</h3>
							<h5>Your favorite Stars Hollow season is fall.</h5>
							<select id="question8">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 9</h3>
							<h5>Gilmore girls is your favorite show on the planet.</h5>
							<select id="question9">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field">
							<h3>Question 10</h3>
							<h5>You will never stop revisiting the town of Stars Hollow.</h5>
							<select id="question10">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<!-- Survey Submit Button -->
						<div>
							<button class="btn waves-effect waves-light" type="submit" name="action" id="submitButton">Submit Responses
							</button>
						</div>
      <div class="col-md-2"></div>
    </div>

    <!-- Modal Dialog Displaying Closest Friend Match -->
    	<div id="modal1" class="modal">
    		<div class="modal-content">
    			<h4>Closest Friend Match</h4>
    			<div class="divider"></div>
    			<h5 id="userMatch"></h5>
    			<img id="userMatchImage" class="materialboxed" width="650" src="">
    		</div>
    		<div class="modal-footer">
    			<a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Fill Again!</a>
    		</div>
    	</div>



    <script type="text/javascript">
      $(document).ready(function() {
        $('select').material_select();
        $('.modal').modal({
          dismissible: false, // Modal can be dismissed by clicking outside of the modal
          opacity: .5, // Opacity of modal background
          inDuration: 300, // Transition in duration
          outDuration: 200, // Transition out duration
          startingTop: '4%', // Starting top style attribute
          endingTop: '10%' // Ending top style attribute
        });
      });
      // Activate submit button
      $('#submitButton').on('click', function(event) {
        event.preventDefault();
        // Gather user inputs
        var userInput = {
          name: $('#userName').val().trim(),
          photo: $('#userPhoto').val().trim(),
          scores:[
            $('#question1').val().trim(),
            $('#question2').val().trim(),
            $('#question3').val().trim(),
            $('#question4').val().trim(),
            $('#question5').val().trim(),
            $('#question6').val().trim(),
            $('#question7').val().trim(),
            $('#question8').val().trim(),
            $('#question9').val().trim(),
            $('#question10').val().trim()
          ]
        };
        // console.log('userInput = ' + JSON.stringify(userInput));
        // Add user inputs to friends list
        $.post('/api/friends', userInput)
            .done(function(data) {
              // console.log('response = ' + JSON.stringify(data));
              // Set the name and image values of friend match
              $('#userMatch').html(data.matchName);
            $("#userMatchImage").attr("src", data.matchImage);
            // Pop open the modal dialog
              $('#modal1').modal('open');
            });
      });
    </script>
  </body>
  </html>
